import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.nio.charset.StandardCharsets;

import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

public class HVArticle {

	public String id;
	private String title;
	private String keywords;

	private static String nl = System.lineSeparator();

	public HVArticle(String id, String title, String keywords){
		this.id = id;
		this.title = title;
		this.keywords = keywords;
	}

	public static HVArticle fromJSON(String path) throws FileNotFoundException, IOException, ParseException{
		
		String id, title, keywords;

		JSONParser parser = new JSONParser();
		JSONObject article;

		article = (JSONObject) parser.parse(new InputStreamReader(new FileInputStream(path),  StandardCharsets.UTF_8));
		id 		= (String) article.get("id");
		keywords 	= (String) article.get("keywords");
		title 	= (String) article.get("title");

		return new HVArticle(id, title, keywords);
	}
	
	public String toJSON() {
		String tabs1 = "\t";
		String tabs2 = "\t\t";
		String tabs3 = "\t\t\t";

		String json = tabs2 + "{" + nl;
		json += tabs3 + "\"id\":" + tabs2 + "\"" + this.id + "\"," + nl;
		json += tabs3 + "\"category\":" + tabs1 + "\"" + this.cat + "\"," + nl;
		json += tabs3 + "\"pubtime\":" + tabs1 + "\"" + this.day + " " + this.time + "\"" + nl;
		json += tabs2 + "}";

		return json;
	}
}
