import java.io.File;
import java.io.FilenameFilter;
import java.io.IOException;
import java.util.ArrayList;

import org.json.simple.parser.ParseException;


public class HVDirectoryReader {
	
	public static ArrayList<HVArticle> readDirectory(String path){
		
		File file = new File(path);
		
		String[] articles = file.list(new FilenameFilter() {
		  @Override
		  public boolean accept(File current, String name) {
		    return new File(current, name).isDirectory();
		  }
		});
		
		ArrayList<HVArticle> directory = new ArrayList<HVArticle>();
		
		for (String article : articles)
			try {
				directory.add(HVArticle.fromJSON(path + "/" + article + "/descriptor.json"));
				Thread.sleep(1000);
			} catch (IOException | ParseException e) {
				e.printStackTrace();
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		
		return directory;
	}

	public static void main(String[] args) throws IOException {
		File d = new File("../../geschiedenis/");
		String path = d.getCanonicalPath();
		for (HVArticle a : HVDirectoryReader.readDirectory(path)) {
			System.out.println(a.toJSON());
		}
	}
}
